<app-header></app-header>

<div class="container" id="main-container">
<div class="ajout">
   <button   class="btn btn-info"  style="  height:40px;"   (click)="onOpenModal(null,'add')"> <i class="fa fa-plus"></i> </button> 
<h1 class="display-6 text-dark text-center" style="margin-left: 10%; " > TUNISAIR Vols  </h1>

<a class="btn btn-success" routerLink='/utilisateur' style="margin-left: 15%;  height:50px;"   > <i class="fa fa-users"></i>              Gestion des Utilisateurs </a>
</div>
<table class="flight-table">
  <thead>
    <tr>
      <th>Numéro Vol</th>
      <th>Nom du vol</th>
      <th>Départ</th>
      <th>Destination</th>
      <th>Date Départ </th>
      <th>Date Arrivé</th>
      <th>Opérations </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let flight of flightss">
      <td>{{ flight.id }}</td>
      <td>{{ flight.flightname }}</td>
      <td>{{ flight.flightDeparture }}</td>
      <td>{{ flight.destination }}</td>
     
      <td>{{ flight.departure | date:'dd/MM/yyyy HH:mm'  }}</td>
      <td>{{ flight.arrival  | date:'dd/MM/yyyy HH:mm' }}</td>
      <td class="float-right btn-group btn-group-sm">
          <a (click)="onOpenModal(flight, 'edit')"  class="btn btn-warning" data-placement="top" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
          <a (click)="onOpenModal(flight, 'delete')"  class="btn btn-danger " data-placement="top" data-original-title="Delete"><i class="fa fa-trash"></i></a>
      
      </td>
    </tr>
  </tbody>
</table>
</div>
<!-- Add Flight Modal -->
<div class="modal fade" id="addFlightModal" tabindex="-1" role="dialog" aria-labelledby="addFlightModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header">
          <h5 class="modal-title" id="addFlightModalLabel">Add Flight</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
       </div>
       <div class="modal-body">
          <form #addForm="ngForm" (ngSubmit)="onAddFlight(addForm)">
            <div class="form-group">
              <label for="name"> Nom du Vol</label>
              <input type="text" ngModel name="flightname" class="form-control" id="name" placeholder="Nom du vol" required>
           </div>
           <div class="form-group">
              <label for="email">Départ</label>
              <input type="text" ngModel name="flightDeparture" class="form-control" id="email" placeholder="départ" required>
           </div>
           <div class="form-group">
              <label for="phone">Arrivé</label>
              <input type="text" ngModel name="destination" class="form-control" id="jobTile" placeholder="Arrivé" required>
           </div>
           <div class="form-group">
              <label for="phone">Date de Départ</label>
              <input type="date" ngModel name="departure" class="form-control" id="phone" placeholder="date de départ" required>
           </div>
           <div class="form-group">
              <label for="phone">Date d'arrivée </label>
              <input type="date" ngModel name="arrival" class="form-control" id="imageUrl" placeholder="date d'arrivée" required>
           </div>
          <div class="modal-footer">
            <button type="button" id="add-Flight-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary" >Save changes</button>
         </div>
         </form>
      </div>
   </div>
 </div>
 </div>

<!-- Edit Modal -->
<div class="modal fade" id="updateFlightModal" tabindex="-1" role="dialog" aria-labelledby="FlightEditModalLabel" aria-hidden="true">
 <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header">
          <h5 class="modal-title" id="updateFlightModalLabel">Edit Flight {{editFlight?.flightname}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
       </div>
       <div class="modal-body">
          <form #editForm="ngForm">
            <div class="form-group">
              <label for="name"> Nom du Vol</label>
              <input type="text" ngModel="{{editFlight?.flightname}}" name="flightname" class="form-control" id="name" placeholder="Nom du vol" required>
           </div>
           <input type="hidden" ngModel="{{editFlight?.id}}" name="id" class="form-control" id="id" placeholder="Email">
             

           <div class="form-group">
              <label for="email">Départ</label>
              <input type="text" ngModel="{{editFlight?.flightDeparture}}" name="flightDeparture" class="form-control" id="email" placeholder="départ" required>
           </div>
           <div class="form-group">
              <label for="phone">Arrivé</label>
              <input type="text" ngModel="{{editFlight?.destination}}" name="destination" class="form-control" id="jobTile" placeholder="Arrivé" required>
           </div>
           <div class="form-group">
              <label for="phone">Date de Départ</label>
              <input type="text" ngModel="{{editFlight?.departure}}" name="departure" class="form-control" id="phone" placeholder="date de départ" required>
           </div>
           <div class="form-group">
              <label for="phone">Date d'arrivée </label>
              <input type="text" ngModel="{{editFlight?.arrival}}" name="arrival" class="form-control" id="imageUrl" placeholder="date d'arrivée" required>
           </div>
              <div class="modal-footer">
                 <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Close</button>
                 <button   *ngIf="editFlight" (click)="onUpdateFlight(editFlight.id,editForm.value)" data-dismiss="modal" class="btn btn-primary" >Save changes</button>
              </div>
           </form>
        </div>
     </div>
  </div>
</div>
<!-- Delete Modal -->
<div class="modal fade" id="deleteFlightModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
     <div class="modal-content">
        <div class="modal-header">
           <h5 class="modal-title" id="deleteModelLabel">Delete Flight</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
        <div class="modal-body">
           <p>Êtes-vous sûr de vouloir supprimer le vol {{deleteFlight?.flightname}} ?</p>
           <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
              <button *ngIf="deleteFlight" (click)="onDeleteFlight(deleteFlight.id)" class="btn btn-danger" data-dismiss="modal">Oui</button>
           </div>
        </div>
     </div>
  </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/js/bootstrap.bundle.min.js"></script>
  